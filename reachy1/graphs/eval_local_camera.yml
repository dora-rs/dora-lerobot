nodes:
  - id: reachy-vision-client
    custom:
      source: ../nodes/webcam.py
      inputs:
        tick: dora/timer/millis/33
      outputs:
        - cam_trunk

  - id: plot
    custom:
      source: ../nodes/plot_node.py
      inputs:
        image: reachy-vision-client/cam_trunk
        #  action: eval/action
        # text_vlm: idefics2/speak
        text_whisper: whisper/text_llm
      envs:
        IMAGE_WIDTH: 480
        IMAGE_HEIGHT: 640

  # - id: idefics2
  #   custom:
  #     source: ../nodes/idefics2_node_demo.py
  #     inputs:
  #       image:
  #         source: reachy-vision-client/cam_trunk
  #         queue_size: 1
  #       text: whisper/text_llm
  #     outputs:
  #       - speak
  #       - control

  - id: whisper
    custom:
      source: ../nodes/whisper_node.py
      inputs:
        audio: dora/timer/millis/1000
      outputs:
        - stop
        - text_llm
        - stop

  - id: parler
    custom:
      source: ../nodes/speak_node.py
      inputs:
        text: idefics2/speak
        stop: whisper/stop
      outputs:
        - start_high_five
